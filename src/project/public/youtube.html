<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<title>Просмотр YouTube Shorts</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f0f0f0;
        padding: 20px;
        margin: 0;
        max-width: 1000px;
        margin-left: auto;
        margin-right: auto;
        text-align: center;
        opacity: 0;
        transition: opacity 1s ease;
}

    body.loaded {
      opacity: 1;
    }
    #searchInput {
        width: 70%;
        padding: 8px;
        font-size: 16px;
    }
    button {
        padding: 8px 12px;
        font-size: 16px;
        margin-left: 10px;
        cursor: pointer;
    }
    #videoList {
        display: flex;
        flex-wrap: wrap;
        margin-top: 20px;
        justify-content: center;
    }
    .video-item {
        margin: 10px;
        width: 200px;
    }
    iframe {
        width: 100%;
        height: 300px;
    }
</style>
</head>
<body>

<h1>YouTube Shorts Viewer</h1>
<p>Введите название канала или поисковой запрос, чтобы найти Shorts</p>
<input type="text" id="searchInput" placeholder="Например, канал или тема" />
<button onclick="searchShorts()">Поиск</button>

<div id="videoList"></div>

<script>
    const API_KEY = 'AIzaSyAYZJlVVzym7XW4YzMMN1MDtbFCsYf6Daw'; // вставьте свой API-ключ сюда

    // Функция для поиска Shorts по запросу
    function searchShorts() {
        const query = document.getElementById('searchInput').value.trim();
        if (!query) {
            alert('Пожалуйста, введите запрос');
            return;
        }
        document.getElementById('videoList').innerHTML = 'Загрузка...';

        // Поиск видео по ключевым словам с фильтром по Shorts
        fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(query)}&type=video&maxResults=12&key=${API_KEY}`)
            .then(res => res.json())
            .then(data => {
                const videos = data.items.filter(item => {
                    // Фильтрация Shorts по названию или другим признакам
                    // Можно добавить фильтр по длине видео, если есть доступ
                    return true; // пока что показываем все
                });
                displayVideos(videos);
            })
            .catch(err => {
                console.error(err);
                document.getElementById('videoList').innerHTML = 'Ошибка загрузки видео.';
            });
    }

    function displayVideos(videos) {
        const container = document.getElementById('videoList');
        container.innerHTML = '';

        videos.forEach(video => {
            const videoId = video.id.videoId;
            const title = video.snippet.title;
            const thumbnail = video.snippet.thumbnails.medium.url;

            const div = document.createElement('div');
            div.className = 'video-item';
            div.innerHTML = `
                <img src="${thumbnail}" style="width:100%; cursor:pointer;" onclick="showVideo('${videoId}')"/>
                <p>${title}</p>
            `;
            container.appendChild(div);
        });
    }

    function showVideo(videoId) {
        // Открываем встроенный просмотр
        const container = document.getElementById('videoList');
        container.innerHTML = `
            <button onclick="searchShorts()">Назад к списку</button>
            <div style="margin-top:10px;">
                <iframe src="https://www.youtube.com/embed/${videoId}?autoplay=1" allowfullscreen></iframe>
            </div>
        `;
    }
</script>
<script>
  window.addEventListener('load', () => {
    document.body.classList.add('loaded');
  });
</script>
</body>
</html>